<div class="catalog-page">
  <div class="page-header">
    <div>
      <h1>Available Offerings</h1>
      <p class="text-muted">Browse and enroll in available subjects</p>
    </div>
  </div>

  <div class="alert alert-success" *ngIf="success">{{ success }}</div>
  <div class="alert alert-danger" *ngIf="error">{{ error }}</div>

  <div class="loading" *ngIf="loading">Loading offerings...</div>

  <div class="offerings-grid" *ngIf="!loading">
    <div class="offering-card" *ngFor="let o of offerings" [class.disabled]="!o.can_enroll">
      <div class="offering-header">
        <span class="subject-code">{{ o.subject?.code }}</span>
        <span class="quota-badge" [class.full]="o.available_quota === 0">
          {{ o.enrolled_count }}/{{ o.max_quota }}
        </span>
      </div>

      <h3 class="subject-name">{{ o.subject?.name }}</h3>

      <div class="offering-details">
        <div class="detail-row">
          <span class="label">Teacher:</span>
          <span>{{ o.teacher?.user?.username || '-' }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Classroom:</span>
          <span>{{ o.classroom?.code }} ({{ o.classroom?.building }})</span>
        </div>
        <div class="detail-row">
          <span class="label">Schedule:</span>
          <span class="schedule">{{ formatSchedule(o.schedule) }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Available:</span>
          <span [class.text-success]="o.available_quota > 0" [class.text-danger]="o.available_quota === 0">
            {{ o.available_quota }} spots
          </span>
        </div>
      </div>

      <div class="restrictions" *ngIf="o.restrictions && o.restrictions.length">
        <span class="restriction-tag" *ngFor="let r of o.restrictions">{{ r }}</span>
      </div>

      <button 
        class="btn btn-primary btn-block" 
        [disabled]="!o.can_enroll || enrolling === o.id"
        (click)="enroll(o)">
        {{ enrolling === o.id ? 'Enrolling...' : (o.can_enroll ? 'Enroll' : 'Not Available') }}
      </button>
    </div>
  </div>

  <div class="empty" *ngIf="!loading && !offerings.length">
    <p>No offerings available at this time</p>
  </div>
</div>
