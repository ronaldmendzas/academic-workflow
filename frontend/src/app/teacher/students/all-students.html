<div class="students-page">
  <div class="page-header">
    <div>
      <h1>All My Students</h1>
      <p class="text-muted">Students enrolled in your courses, grouped by subject</p>
    </div>
    <div class="total-badge" *ngIf="!loading">
      <span class="count">{{ totalStudents }}</span>
      <span class="label">Total Students</span>
    </div>
  </div>

  <div class="alert alert-danger" *ngIf="error">{{ error }}</div>
  <div class="loading" *ngIf="loading">Loading students...</div>

  <div class="courses-list" *ngIf="!loading && courseStudents.length">
    <div class="course-section" *ngFor="let course of courseStudents">
      <div class="course-header">
        <div class="course-info">
          <span class="subject-code">{{ course.subject_code }}</span>
          <h3>{{ course.subject_name }}</h3>
        </div>
        <span class="student-count">{{ course.students.length }} estudiantes</span>
      </div>

      <div class="students-table">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>CÃ³digo</th>
              <th>Nombre</th>
              <th>Fecha InscripciÃ³n</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let student of course.students; let i = index">
              <td>{{ i + 1 }}</td>
              <td class="code">{{ student.student_code }}</td>
              <td>{{ student.student_name }}</td>
              <td>{{ student.enrolled_at | date:'dd/MM/yyyy' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="empty" *ngIf="!loading && !courseStudents.length">
    <div class="empty-icon">ğŸ‘¥</div>
    <h3>No Students Yet</h3>
    <p>No students have enrolled in your courses</p>
    <a routerLink="/teacher/offerings" class="btn btn-primary">View My Courses</a>
  </div>
</div>
